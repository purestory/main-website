---
description: 
globs: 
alwaysApply: false
---
# Nginx Deployment Rules

## âŒ **ì ˆëŒ€ ê¸ˆì§€ì‚¬í•­**
1. **sites-enabledì— ë°±ì—… íŒŒì¼ ìƒì„± ê¸ˆì§€** - nginxê°€ ëª¨ë“  íŒŒì¼ì„ ì„¤ì •ìœ¼ë¡œ ì½ìŒ
2. **sites-enabledì— ì‹¤ì œ íŒŒì¼ ìƒì„± ê¸ˆì§€** - ì‹¬ë³¼ë¦­ ë§í¬ë§Œ í—ˆìš©
3. **ê¶Œí•œ í™•ì¸ ì—†ì´ íŒŒì¼ ìˆ˜ì • ì‹œë„ ê¸ˆì§€**

## ğŸ“‹ **í•„ìˆ˜ í”„ë¡œì„¸ìŠ¤**

### Nginx ì„¤ì • ìˆ˜ì •
```bash
# 1. ê¶Œí•œ í™•ì¸
ls -la /etc/nginx/sites-available/purestory

# 2. ë°±ì—… ìƒì„±
sudo cp /etc/nginx/sites-available/purestory /home/purestory/tmp/nginx_backup_$(date +%Y%m%d_%H%M%S).conf

# 3. í¸ì§‘ìš© íŒŒì¼ ìƒì„±
sudo cp /etc/nginx/sites-available/purestory /home/purestory/tmp/nginx_edit.conf
sudo chown purestory:purestory /home/purestory/tmp/nginx_edit.conf

# 4. ìˆ˜ì • í›„ ì ìš©
sudo cp /home/purestory/tmp/nginx_edit.conf /etc/nginx/sites-available/purestory
sudo nginx -t
sudo systemctl reload nginx
```

### ë°°í¬ ìˆœì„œ
1. **Frontend**: `cd frontend && npm run build`
2. **Test**: `sudo nginx -t`
3. **Apply**: `sudo systemctl reload nginx`

## API ë¼ìš°íŒ…
- **Backend**: Port 8001 (systemd ê´€ë¦¬)
- **Proxy**: `/main-api/` â†’ `http://localhost:8001`
- **Frontend**: ìƒëŒ€ê²½ë¡œ `/main-api/...` ì‚¬ìš©
